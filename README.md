# Team5_BE

# week3 코드리뷰 질문

## 도기헌
### 리뷰 받고 싶은 부분
1. WebClient를 사용하여 외부 api 요청 처리를 했는데 이때 response용 dto를 만들어 깔끔하게 받아오고 싶었는데 response 데이터가 복잡해 결과를 String으로 받아와서 따로 처리하였습니다. 혹시 깔끔하게 처리할 수 있는 방안이 있는지 궁금합니다.
2. 외부 api 관련 테스트를 어떻게 진행하는지 궁금합니다. 처음엔 mock 데이터를 만들어 테스트 해볼까 싶었는데 위와 말한대로 데이터가 너무 복잡해서 하지 않았습니다. 혹시 mock 데이터를 만드는 방식 말고 다른 테스트 방법이 있는지 궁금합니다.
### 개발 관련 질문
1. 현재 s3에 동영상 업로드 관련 로직을 작성하고 있습니다. 처음에는 프론트에서 백으로 영상을 보내고 다시 백에서 s3로 영상을 저장하는 것이 비효율적일 것 같아 s3의 presigned url을 사용하여 프론트에서 s3로 바로 저장하는 방식을 생각해보았습니다. 이런 방식이 더 나을까요?
2. 현업에서 복합키를 사용할 때 IdClass를 더 많이 사용하는지 아니면 EmbeddedId를 더 많이 사용하는지 알고 싶습니다. IdClass의 경우 db 친화적이며 jpql이 짧아진다는 장점이 있는 것으로 알고 있고 EmbeddedId의 경우 특정 상황에서 jpql이 더 길어질 수 있지만 객체지향적이게 코드를 작성할 수 있는 장점이 있다고 알고 있습니다. 멘토님은 어떤 방식을 더 선호하시는지 궁금합니다.
## 석혜원
에러 발생 시 응답으로 ProblemDetail을 사용하고자 했는데, 논의한 값 외에 부가적인 값들이 많아서 dto를 따로 만들었습니다. 
해당 값들을 필요한 값이라고 판단하여 ProblemDeatil을 사용하는 게 좋을지, 현재 dto를 계속 사용하는 게 맞는지 판단이 어렵습니다. ProblemDetail을 많이 사용하는 추세인지도 궁금합니다!

## 신성민
저희 테이블 구성 중 다대다 연관관계의 중간 테이블(member_category, video_keyword, reaction)의 경우 외래키 2개를 묶어 복합키로 식별자를 두었는데, 실무에서는 잘 사용되지 않는 방식이라는 얘기를 들었습니다. 성능 상의 이유로 사용하지 않는 건지 아니면 다른 이유가 있는지 궁금합니다!

## 탁정민
좋아요(Reaction) 기능을 구현할 때 단순히 영상(Video)의 List<Reaction> 크기를 조회해서 좋아요 수를 계산하는 방식은 비효율적이라고 생각했습니다. 
그래서 **1. 쿼리로 좋아요 수 직접 집계** 방법과 **2. Video Entity 에 likeCount 라는 변수를 두고 값을 업데이트** 하는 방법을 생각했습니다. 
두 방법의 장단점과 저희 서비스(숏폼 영상을 업로드 -> 댓글과 좋아요/싫어요로 유저 간 피드백)에 어느 방법이 더 맞는지 궁금합니다!
## 한영진
유튜브 API에서 영상 데이터를 불러올 때 쇼츠만 따로 가져올 수 없는 것 같습니다. 그래서 저는 검색어에 ‘쇼츠’를 포함시켜 필터링하는 방법을 고려하고 있는데, 멘토님이 생각하시기에 더 나은 방식이 있으실까요?(쇼츠와 롱폼 영상 모두 가져와서 영상 시간을 판단하는 메서드로 필터링하는 방법도 있을 것 같긴한데, 효율적이지 않을 것 같아서 질문드립니다!)
